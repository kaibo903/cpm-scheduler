# 🏗️ Construction Planning and Scheduling Learning Assistant PRD v1.15
**（工程進度規劃與控制課程解答工具）**  
Author: 張凱博  
Date: 2025-10-27  
Version: v1.15  

---

## 一、產品概述（Product Overview）

本系統是一款輕量化的「**自動Bar Chart生成工具**」，  
設計理念為「**最少輸入，立即出圖**」。  
使用者僅需輸入三項欄位資料：

| 欄位 | 說明 | 範例 |
|------|------|------|
| 作業名稱（Task Name） | 工程或工作項目名稱 | 基礎開挖、結構施工 |
| 工期（Duration） | 所需工作天數 | 10 |
| 前置作業／後續作業（Predecessor / Successor） | 作業邏輯關聯 | 結構施工 → 外牆裝修 |

系統會自動進行：
- **依賴關係分析**（Predecessor ↔ Successor）  
- **要徑法（CPM）排程運算**  
- **自動生成Bar Chart**  
- **顯示專案總工期與要徑作業**

### 1.1 目標用戶
- 營建管理學生
- 顧問工程師
- 地主／更新戶
- 營建專案經理
- 工程師

## 二、設計理念與使用場景（Design Concept）

### 🎯 核心理念
- 「**以最小輸入產出最大清晰度**」  
- 無需輸入日期，僅靠邏輯關係與工期自動排程。  
- 適合教育、顧問簡報與早期規劃階段使用。

### 🧱 使用場景
| 使用者 | 目的 |
|---------|------|
| 營建管理學生 | 繪製課堂進度圖、專題作業展示 |
| 顧問工程師 | 快速向業主呈現施工邏輯 |
| 地主／更新戶 | 理解施工全期結構與時程關聯 |

### 2.1 成功指標
- 用戶能夠在3分鐘內建立基本Bar Chart
- 支援至少50個作業的專案
- 自動計算要徑
- 支援CSV/Excel匯入匯出

## 三、系統功能（Functional Requirements）

### 3.1 任務輸入模組（Task Input）
- 支援三欄輸入：`Task Name`、`Duration`、`Predecessor / Successor`
- 可任意使用「前置」或「後續」欄位，系統自動反推對應關係。
- 支援批次匯入（CSV / Excel）。
- 自動生成唯一 Task ID。

**進階依賴關係功能：**
- 支援四種依賴關係類型：
  - **FS (Finish-to-Start)**：前置作業完成後，後續作業才能開始（預設）
  - **SS (Start-to-Start)**：前置作業開始後，後續作業才能開始
  - **FF (Finish-to-Finish)**：前置作業完成後，後續作業才能完成
  - **SF (Start-to-Finish)**：前置作業開始後，後續作業才能完成
- 支援 **Lag 時間**：可設定正負天數的時間延遲或提前
- 支援 **編輯依賴關係**：可修改現有依賴關係的類型和 Lag 值
- 支援 **合併重複作業**：自動合併相同名稱的作業並整合所有依賴關係

**錯誤偵測：**
- 自動檢查循環依賴（A→B→A）。  
- 工期必須為正整數。  
- 自動忽略空白列。
- 驗證依賴關係的完整性與正確性。

### 3.2 排程模組（Scheduling Engine）

採用 **Critical Path Method (CPM)**，支援多種依賴型態（FS / SS / FF / SF）與 Lag 時間。

**演算法步驟：**
1. **依賴關係驗證**：
   - 檢查循環依賴（A→B→A）
   - 驗證任務資料完整性
   - 建立雙向依賴圖

2. **拓樸排序**：
   - 使用 Kahn's Algorithm
   - 確保任務執行順序正確
   - 識別起始和結束任務

3. **Forward Pass（前向計算）**：
   - ES = max(EF of predecessors)  
   - EF = ES + Duration  
   - 計算最早開始/完成時間

4. **Backward Pass（後向計算）**：
   - LF = min(LS of successors)  
   - LS = LF - Duration  
   - 計算最晚開始/完成時間

5. **浮時計算**：
   - TF = LS - ES（總浮時）
   - FF = min(ES of successors) - EF（自由浮時）
   - 若 TF = 0 → 標示為要徑

6. **要徑識別**：
   - 找出所有 TF = 0 的任務
   - 建立要徑連鎖
   - 計算專案總工期

**輸出結果欄位：**
| 欄位 | 說明 | 計算公式 |
|------|------|----------|
| ES | 最早開始時間 | max(前置任務的EF) |
| EF | 最早完成時間 | ES + Duration |
| LS | 最晚開始時間 | LF - Duration |
| LF | 最晚完成時間 | min(後續任務的LS) |
| TF | 總浮時 | LS - ES |
| FF | 自由浮時 | min(後續任務的ES) - EF |
| Critical | 是否為要徑作業 | TF = 0 |
| Total Duration | 專案總工期 | max(所有結束任務的EF) |

### 3.3 CPM結果顯示模組（CPM Results Display）

**CPM計算結果表格：**
- 作業名稱、工期、依賴關係
- ES/EF/LS/LF 時間計算結果
- TF/FF 浮時分析
- 要徑標示（紅色高亮）

**表格設計規範（v1.2 更新）：**
- **標題樣式**：
  - "CPM 計算結果" 標題中的 "CPM" 採用細體（font-weight: 300）
  - 其他標題採用標準字重（font-weight: 500）
  - 統一字母間距（letter-spacing: 0.5px）
- **欄位配置**：
  - 作業名稱欄：較寬，單行顯示，超出部分省略
  - 工期欄：容納 3 位數字，數字靠右對齊
  - 要徑作業欄：窄欄位，僅顯示勾選標記
  - 前置/後續作業：多個依賴關係垂直堆疊顯示
- **視覺優化**：
  - 移除垂直格線，保持簡潔外觀
  - 緊湊的行距（padding: 8px 10px）
  - 起始/結束標籤與作業名稱同行顯示
  - 響應式字體大小（標題 11px，內容 12px）

**要徑視覺化：**
- 要徑任務連鎖顯示
- 專案總工期統計
- 要徑作業清單
- 浮時分析圖表

**錯誤處理與驗證：**
- 循環依賴偵測和提示
- 資料完整性檢查
- 計算結果驗證

### 3.4 Bar Chart繪製模組（Gantt Renderer）

- X軸：天數（以專案起始日為 Day 0）  
- Y軸：作業名稱  
- 條狀圖顯示工期長度  
- 要徑以粗框或紅框標示  
- 依賴關係箭頭連線
- 自動調整圖高以符合任務數量

**視覺化特色：**
- 要徑高亮顯示
- 浮時任務淡色顯示
- 時間軸標記
- 縮放和平移功能

**輸出格式：**
- 圖片：PNG、PDF  
- 表格：CSV、Excel  

### 3.5 匯入與匯出（Data I/O）
- 匯入：CSV 或 Excel，支援繁體中文欄位名稱。  
- 匯出：  
  - Bar Chart（PNG / PDF）  
  - CPM計算結果表（CSV / Excel）
  - 要徑報告（PDF）

**範例輸入檔：**
```csv
TaskName,Duration,Predecessor,Successor
地質調查,5,,初步設計
初步設計,10,地質調查,結構設計
結構設計,15,初步設計,發包準備
發包準備,7,結構設計,開工動員
開工動員,3,發包準備,
```

**範例輸出檔（CPM結果）：**
```csv
TaskName,Duration,ES,EF,LS,LF,TF,FF,Critical
地質調查,5,0,5,0,5,0,0,TRUE
初步設計,10,5,15,5,15,0,0,TRUE
結構設計,15,15,30,15,30,0,0,TRUE
發包準備,7,30,37,30,37,0,0,TRUE
開工動員,3,37,40,37,40,0,0,TRUE
```

## 四、技術需求（Technical Requirements）

### 4.1 技術架構
- **前端框架**: Vue 3 + TypeScript
- **視覺化庫**: D3.js
- **日期處理**: date-fns
- **建構工具**: Vite
- **樣式**: CSS3 + SCSS

### 4.2 效能需求
- 頁面載入時間 < 2秒
- 支援50個作業的流暢操作
- 要徑計算 < 1秒
- 響應式設計，支援各種螢幕尺寸

### 4.3 瀏覽器支援
- Chrome 90+
- Firefox 88+
- Safari 14+
- Edge 90+

## 五、使用者介面設計（UI Design）

### 5.1 整體佈局
```
┌─────────────────────────────────────────────────────────┐
│                    標題列                                │
├─────────────┬───────────────────────────────────────────┤
│             │              時間軸標題                    │
│   作業列表   ├───────────────────────────────────────────┤
│             │                                          │
│  - 地質調查  │             Bar Chart區域                    │
│  - 初步設計  │                                          │
│  - 結構設計  │                                          │
│  - 發包準備  │                                          │
│  - 開工動員  │                                          │
└─────────────┴───────────────────────────────────────────┘
```

### 5.2 主要元件

#### 5.2.1 輸入區域
- 作業名稱輸入框
- 工期輸入框（數字）
- 前置/後續作業選擇器
- 新增作業按鈕

#### 5.2.2 Bar Chart區域
- 時間軸（天數）
- 作業條狀圖
- 要徑高亮顯示
- 依賴關係連線

#### 5.2.3 控制面板
- 匯入/匯出按鈕
- 重設按鈕
- 要徑顯示切換

## 六、資料結構（Data Structure）

### 6.1 依賴關係資料結構（v1.2 新增）
```typescript
interface Dependency {
  taskId: string;                // 依賴任務ID
  type: 'FS' | 'SS' | 'FF' | 'SF';  // 依賴關係類型
  lag: number;                   // Lag 時間（天數，可為正負值）
}
```

### 6.2 作業資料結構
```typescript
interface CPMTask {
  id: string;                    // 唯一識別碼
  name: string;                  // 作業名稱
  duration: number;              // 工期（天數）
  predecessors: Dependency[];    // 前置作業（v1.2 更新為 Dependency 陣列）
  successors: Dependency[];      // 後續作業（v1.2 更新為 Dependency 陣列）
  
  // CPM 計算結果
  es?: number;                   // 最早開始時間 (Earliest Start)
  ef?: number;                   // 最早完成時間 (Earliest Finish)
  ls?: number;                   // 最晚開始時間 (Latest Start)
  lf?: number;                   // 最晚完成時間 (Latest Finish)
  tf?: number;                   // 總浮時 (Total Float)
  ff?: number;                   // 自由浮時 (Free Float)
  
  // 狀態標記
  isCritical?: boolean;          // 是否為要徑
  isStart?: boolean;             // 是否為起始節點
  isEnd?: boolean;               // 是否為結束節點
}
```

### 6.3 CPM計算結果資料結構
```typescript
interface CPMResult {
  tasks: CPMTask[];             // 作業列表（含CPM計算結果）
  criticalPath: string[];       // 要徑任務ID
  totalDuration: number;        // 專案總工期
  startTasks: string[];         // 起始任務ID
  endTasks: string[];           // 結束任務ID
  hasCycle: boolean;            // 是否存在循環依賴
}

interface Project {
  id: string;                   // 專案ID
  name: string;                 // 專案名稱
  tasks: CPMTask[];             // 作業列表
  cpmResult?: CPMResult;        // CPM計算結果
  createdAt: Date;              // 建立時間
  updatedAt: Date;              // 更新時間
}
```

## 七、開發時程（Development Timeline）

### 7.1 第一階段 (1週) - 核心功能
- [ ] 作業輸入介面
- [ ] CPM演算法核心實現
- [ ] Forward Pass / Backward Pass 計算
- [ ] 要徑識別
- [ ] 基本Bar Chart顯示

### 7.2 第二階段 (1週) - 進階功能
- [ ] CPM結果表格顯示
- [ ] 依賴關係視覺化
- [ ] 循環依賴偵測
- [ ] 資料匯入/匯出
- [ ] 錯誤處理和驗證

### 7.3 第三階段 (0.5週) - 測試與優化
- [ ] CPM計算準確性測試
- [ ] 使用者介面優化
- [ ] 效能優化
- [ ] 文件撰寫
- [ ] 部署準備

## 八、驗收標準（Acceptance Criteria）

### 8.1 功能驗收
- [ ] 能夠輸入作業名稱、工期、前置/後續作業
- [ ] 自動執行CPM計算（Forward Pass + Backward Pass）
- [ ] 正確計算ES/EF/LS/LF/TF/FF
- [ ] 識別要徑並高亮顯示
- [ ] 顯示Bar Chart和依賴關係
- [ ] 支援CSV/Excel匯入匯出
- [ ] 循環依賴偵測和錯誤提示
- [ ] CPM結果表格顯示

### 8.2 效能驗收
- [ ] 頁面載入時間 < 2秒
- [ ] 支援50個作業的流暢操作
- [ ] 要徑計算 < 1秒
- [ ] 響應式設計正常運作

### 8.3 使用者體驗驗收
- [ ] 介面直觀易用
- [ ] 操作流程順暢
- [ ] 錯誤提示清晰
- [ ] 支援繁體中文

## 九、版本更新記錄（Version History）

### v1.15 更新內容 (2025-10-27) - 工具頁面極簡風格重新設計

#### 設計理念
根據用戶反饋（「有點俗」），將工具頁面從現代化風格轉變為極簡專業風格，去除過多的裝飾元素，採用更乾淨、低調的設計語言。

#### 核心改進項目

**1. 🎯 標題區域簡化**
- ✨ **佈局調整**
  - 居中改為左對齊（更正式）
  - 標題字體：32px → 28px（更內斂）
  - 描述字體：16px → 14px
  - 移除漸層背景，使用純白色
  - 字體顏色：#1f2937 → #333（更柔和）

**2. 🎴 卡片設計簡化**
- ✨ **極簡風格**
  - 圓角：16px → 4px（更方正）
  - 內距：32px → 24px（更緊湊）
  - 卡片間距：32px → 24px
  - 移除頂部裝飾線條
  - 取消卡片上浮動畫

- 🎨 **陰影系統**
  - 預設：無陰影（box-shadow: none）
  - Hover：輕微陰影（0 2px 8px rgba(0,0,0,0.08)）
  - 過渡時間：0.3s → 0.2s（更快速）

**3. 🏷️ 圖標徽章簡化**
- ✨ **尺寸縮減**
  - 從 64px × 64px → 48px × 48px（更低調）
  - 圓角：12px → 4px（更方正）
  - 字體：16px → 14px

- 💫 **去除動畫**
  - 移除 Hover 放大效果
  - 移除漸層背景，使用純色
  - 移除陰影效果

**4. 📝 文字排版優化**
- ✨ **標題優化**
  - 工具名稱：20px → 18px
  - 顏色：#1f2937 → #333（更柔和）
  - 字重：600 → 500（更細）

- 📄 **描述文字**
  - 字體大小：14px（維持不變）
  - 行高：1.7 → 1.6（更緊湊）
  - 顏色：#6b7280 → #666（更簡潔）

**5. 🔗 動作按鈕簡化**
- ✨ **極簡效果**
  - 圖標圓圈：20px → 16px（更小）
  - 邊框：2px → 1.5px（更細）
  - 移除背景填充動畫
  - 僅保留文字顏色變化與圖標位移

**6. 🎬 動畫系統簡化**
- ✨ **最小化動畫**
  - 取消卡片懸停上浮
  - 取消圖標縮放效果
  - 僅保留必要的顏色過渡
  - 統一過渡時間為 0.2s

#### 技術細節

```css
/* 標題區域 - 極簡風格 */
.tools-header {
  padding: 32px 0 24px 0;
  background: #ffffff;           /* 純白背景 */
  border-bottom: 1px solid #e5e5e5;
}

.header-content {
  text-align: left;              /* 左對齊 */
}

/* 卡片設計 - 扁平化 */
.tool-card {
  border-radius: 4px;            /* 小圓角 */
  padding: 24px;
  box-shadow: none;              /* 無陰影 */
  border: 1px solid #e5e5e5;
}

.tool-card:hover {
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);  /* 輕微陰影 */
  transform: none;               /* 無位移 */
}

/* 圖標徽章 - 純色方形 */
.icon-chart-badge {
  width: 48px;
  height: 48px;
  border-radius: 4px;
  background: #667eea;           /* 純色背景 */
  box-shadow: none;
}
```

#### 視覺對比

```
v1.14（現代化風格）：
┏━━━━━━━━━━━━━━━━━┓
┃                  ┃
┃ [CPM 64px 漸層]  ┃
┃                  ┃
┃ 進度規劃 (20px)  ┃
┃ 描述文字...      ┃
┃                  ┃
┃ ● 瞭解更多 → 動畫┃
┗━━━━━━━━━━━━━━━━━┛
⬆️ 大圓角 + 陰影 + 動畫

v1.15（極簡風格）：
┌─────────────────┐
│ [CPM 48px 純色] │
│                 │
│ 進度規劃 (18px) │
│ 描述文字...     │
│                 │
│ ○ 瞭解更多 →    │
└─────────────────┘
⬆️ 小圓角 + 無陰影 + 簡約
```

#### 色彩系統

移除漸層，使用純色：

| 工具 | 純色 | 文字 |
|------|------|------|
| CPM | #667eea | white |
| TCT | #f54ea2 | white |
| LABOR | #f7971e | white |
| QA | #11998e | white |
| LOG | #2196f3 | white |
| PLAN | #8e2de2 | white |

#### 響應式優化

- **桌面版（>1200px）**：3 欄自適應網格
- **平板版（768-1200px）**：2 欄自適應網格
- **手機版（<768px）**：單欄顯示
- **小屏幕（<480px）**：圖標縮小至 44px

#### 使用者價值

- 🎨 **專業低調** - 去除華而不實的裝飾
- ⚡ **高效簡潔** - 減少動畫干擾，專注內容
- 📐 **清晰易讀** - 更好的文字層次與可讀性
- 🎯 **正式商務** - 適合專業場合使用
- 📱 **輕量快速** - 減少 CSS 複雜度，提升性能

#### 設計原則

基於用戶提供的參考圖片，遵循以下設計原則：
1. **少即是多** - 去除不必要的裝飾
2. **功能優先** - 內容比形式更重要
3. **空間呼吸** - 適當留白而非填充裝飾
4. **一致性** - 統一的設計語言
5. **可讀性** - 清晰的文字層次

---

### v1.14 更新內容 (2025-10-27) - 工具頁面現代化重新設計

#### 設計理念
採用現代化卡片設計語言，提升視覺層次與互動體驗，讓工具展示更具吸引力與專業感。

#### 核心改進項目

**1. 🎯 標題區域全新設計**
- ✨ **居中式佈局**
  - 大標題（32px）+ 描述文案（16px）
  - 文字居中對齊，更具視覺衝擊力
  - 漸層背景（#fafafa → #ffffff）
  - 底部邊框分隔

**2. 🎴 卡片設計升級**
- ✨ **視覺優化**
  - 圓角從 4px → 16px（更柔和）
  - 內距從 24px → 32px（更寬敞）
  - 卡片間距從 20px → 32px（更舒適）
  - 頂部彩色線條裝飾（hover 顯示）

- 🎨 **陰影系統**
  - 預設：輕微陰影（0 1px 3px）
  - Hover：深度陰影（0 12px 24px）
  - 平滑過渡動畫（0.3s cubic-bezier）

**3. 🏷️ 圖標徽章優化**
- ✨ **尺寸升級**
  - 從 48px × 48px → 64px × 64px
  - 圓角從 3px → 12px
  - 字體從 13px → 16px

- 💫 **互動動畫**
  - Hover 放大效果（scale 1.05）
  - 陰影增強動畫
  - 平滑過渡效果

**4. 📝 文字排版優化**
- ✨ **標題優化**
  - 工具名稱：18px → 20px
  - 顏色更新為深灰（#1f2937）
  - Hover 時變為主題色（#667eea）

- 📄 **描述文字**
  - 字體大小：13px → 14px
  - 行高：1.6 → 1.7
  - 顏色：#666 → #6b7280

**5. 🔗 動作按鈕升級**
- ✨ **互動效果**
  - 圖標圓圈從 18px → 20px
  - Hover 時圖標填充主題色
  - 文字與圖標間距動態擴展
  - 圖標向右移動動畫

**6. 🎬 動畫系統**
- ✨ **卡片動畫**
  - 懸停上浮：-2px → -4px
  - 使用 cubic-bezier(0.4, 0, 0.2, 1) 緩動
  - 所有過渡時間統一為 0.3s

#### 技術細節

```css
/* 標題區域 */
.tools-header {
  padding: 40px 0 32px 0;
  background: linear-gradient(to bottom, #fafafa 0%, #ffffff 100%);
  border-bottom: 1px solid #e5e5e5;
}

/* 卡片設計 */
.tool-card {
  border-radius: 16px;
  padding: 32px;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);
}

.tool-card:hover {
  box-shadow: 0 12px 24px rgba(0, 0, 0, 0.12);
  transform: translateY(-4px);
}

/* 圖標徽章 */
.icon-chart-badge {
  width: 64px;
  height: 64px;
  border-radius: 12px;
  box-shadow: 0 4px 12px rgba(102, 126, 234, 0.25);
}

.icon-chart-badge:hover {
  transform: scale(1.05);
  box-shadow: 0 6px 16px rgba(102, 126, 234, 0.35);
}
```

#### 視覺對比

```
改進前：
┌─────────────────┐
│ [CPM]           │
│ 進度規劃        │
│ 使用要徑法...   │
│ ○ 瞭解更多      │
└─────────────────┘
⬆️ 小圖標 + 小圓角

改進後：
┏━━━━━━━━━━━━━━━━━┓
┃ [CPM 64px]       ┃
┃                  ┃
┃ 進度規劃         ┃
┃ 使用要徑法...    ┃
┃                  ┃
┃ ● 瞭解更多 →     ┃
┗━━━━━━━━━━━━━━━━━┛
⬆️ 大圖標 + 大圓角 + 動畫
```

#### 色彩與圖標

保留原有的漸層色彩方案，但優化陰影與透明度：

| 工具 | 漸層色彩 | 陰影顏色 |
|------|---------|---------|
| CPM | #667eea → #764ba2 | rgba(102, 126, 234, 0.25) |
| TCT | #f54ea2 → #ff7676 | rgba(245, 78, 162, 0.25) |
| LABOR | #f7971e → #ffd200 | rgba(247, 151, 30, 0.25) |
| QA | #11998e → #38ef7d | rgba(17, 153, 142, 0.25) |
| LOG | #2196f3 → #21cbf3 | rgba(33, 150, 243, 0.25) |
| PLAN | #8e2de2 → #4a00e0 | rgba(142, 45, 226, 0.25) |

#### 響應式優化

- **桌面版（>1200px）**：3-4 欄自適應網格
- **平板版（768-1200px）**：2-3 欄自適應網格
- **手機版（<768px）**：單欄顯示
- **小屏幕（<480px）**：圖標縮小至 56px

#### 使用者價值

- 🎨 **視覺吸引力** - 現代化卡片設計更具吸引力
- 💫 **互動反饋** - 豐富的動畫效果提升體驗
- 📐 **層次分明** - 清晰的視覺層次便於瀏覽
- 🎯 **專業形象** - 精緻的設計提升品牌形象
- 📱 **完美適配** - 優秀的響應式支持各種設備

---

### v1.13 更新內容 (2025-10-27) - 品牌名稱更新與標題列優化

#### 改進項目
根據用戶反饋，進行以下調整：

**1. 🏢 品牌名稱更新**
- ✨ 將「府都建設」改為「營建管理相關工具集」
- 📝 英文副標題改為「Construction Management Tools」
- 更貼切地反映網站的實際功能與定位

**2. ❌ 移除社交媒體圖標**
- 移除 Facebook 圖標及相關樣式
- 簡化導航列結構
- 更專注於核心功能

**3. 📏 標題列高度優化**
- 內距從 20px 增加至 28px
- 提升視覺舒適度
- 更好的呼吸空間

**4. 🔤 字體大小優化**
- 主標題從 20px 增加至 22px
- 副標題從 11px 增加至 12px
- 提升可讀性與視覺層次

#### 視覺效果

```
更新後：
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
│ 🏢 營建管理相關工具集     Home  工具  聯絡我們 │
│    Construction Management Tools            │
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
  ⬆️ 更高的標題列 + 更大的字體
```

#### 技術改進
```css
/* 高度優化 */
.app-header {
  padding: 28px 0;  /* 從 20px 增加 */
}

/* 字體優化 */
.brand-title {
  font-size: 22px;  /* 從 20px 增加 */
}

.brand-subtitle {
  font-size: 12px;  /* 從 11px 增加 */
}
```

#### 使用者價值
- 🎯 **定位清晰**：「營建管理相關工具集」更準確描述網站功能
- 📐 **視覺舒適**：更高的標題列提供更好的視覺體驗
- 🔤 **可讀性佳**：更大的字體更易閱讀
- 🎨 **專業簡潔**：移除非必要元素，專注核心功能

---

### v1.12 更新內容 (2025-10-27) - 網站標題列視覺風格重新設計

#### 設計目標
參考「府都建設」網站風格，打造簡潔專業的標題列，提升品牌形象與使用者體驗。

#### 核心改進項目

**1. 🏢 左側品牌區域重新設計**
- ✨ **Logo + 品牌名稱組合**
  - 設計黑色方形 Logo 圖標（含雙條狀圖案）
  - 大標題「府都建設」+ 小標題「Fu-Du Construction」
  - 水平排列，左側對齊

**2. 🎨 標題列視覺優化**
- 🌈 **背景與配色**
  - 純白色背景（#ffffff）替代原灰色漸層
  - 淺灰色底部邊框（#e5e5e5，1px）
  - 輕微陰影效果增加層次感

- 📏 **尺寸優化**
  - 內距從 32px 縮減至 20px
  - 更精簡緊湊的設計

**3. 🔗 導航項目簡化**
- 📝 **文字風格**
  - 預設淺灰色（#999）
  - Hover 深灰色（#333）
  - Active 狀態中等粗體（font-weight: 500）
  - 移除複雜的背景與動畫效果

- 🎯 **佈局優化**
  - 內距調整為 8px 20px
  - 字體大小 14px
  - 移除底線與懸浮效果

**4. 📱 社交媒體圖標**
- ✨ **Facebook 圖標**
  - 圓形按鈕（32px）
  - Facebook 藍色背景（#3b5998）
  - 白色 "f" 字母
  - Hover 上浮效果與深藍背景

**5. 🎯 Home 頁面標題**
- 📝 **第一個導航項目顯示 "Home"**
  - 英文 "Home" 替代中文「首頁」
  - 更符合國際化風格

#### 技術細節

```vue
<!-- HTML 結構 -->
<header class="app-header">
  <div class="header-brand">
    <div class="logo-icon">
      <div class="logo-bars">
        <span class="bar bar-1"></span>
        <span class="bar bar-2"></span>
      </div>
    </div>
    <div class="brand-text">
      <h1>府都建設</h1>
      <p>Fu-Du Construction</p>
    </div>
  </div>
  
  <nav class="main-nav">
    <router-link to="/">Home</router-link>
    <router-link to="/tools">工具</router-link>
    <router-link to="/contact">聯絡我們</router-link>
    <a href="#" class="social-icon">f</a>
  </nav>
</header>
```

```css
/* CSS 關鍵樣式 */
.app-header {
  background: #ffffff;
  padding: 20px 0;
  border-bottom: 1px solid #e5e5e5;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.04);
}

.logo-icon {
  width: 40px;
  height: 40px;
  background: #333;
  border-radius: 4px;
}

.social-icon {
  width: 32px;
  height: 32px;
  background: #3b5998;
  border-radius: 50%;
}
```

#### 視覺對比

```
改進前：
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
│  工程進度規劃與控制課程解答工具   │
│  Construction Planning...        │
│  [首頁] [工具] [聯絡我們]        │
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
  ⬆️ 灰色漸層背景 + 居中排列

改進後：
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
│ 🏢 府都建設          Home 工具 聯絡我們 f │
│    Fu-Du Construction                  │
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
  ⬆️ 白色背景 + 左右分布 + 社交圖標
```

#### 使用者價值
- 🎨 **專業形象**：簡潔白色背景提升專業度
- 🏢 **品牌識別**：清晰的 Logo 與品牌名稱
- 🔗 **易用性**：簡化的導航項目，更易閱讀
- 📱 **社交連結**：直接的 Facebook 圖標便於分享
- 🌐 **國際化**：Home 英文顯示更符合國際標準

---

### v1.10 更新內容 (2025-10-27) - 成本-時間曲線數據一致性修正

#### 問題描述
成本-時間權衡曲線圖與趕工計劃表格顯示的數據不一致，導致視覺化結果與實際計算結果不符。

#### 根本原因
- `generateCostTimeCurve()` 函數使用獨立的趕工邏輯重新計算曲線
- 該函數使用的是舊版邊際成本算法，與 `solveTCT()` 的新算法不同
- 沒有處理逾期罰金的計算
- 導致兩處計算結果不一致

#### 解決方案
**移除重複計算，直接使用計算結果：**

```typescript
// ❌ 舊方法：重複計算（可能不一致）
costTimeCurve.value = generateCostTimeCurve(tasks.value, projectParams.value)

// ✅ 新方法：直接從結果轉換（保證一致）
costTimeCurve.value = result.value.crashIterations.map(iter => ({
  duration: iter.duration,
  cost: iter.totalCost,
  crash_cost: iter.directCost - baseDirectCost,
  overhead_cost: iter.overheadCost
}))
```

#### 技術優化
1. **單一數據源**
   - ✅ 曲線數據直接來自 `solveTCT()` 的 `crashIterations`
   - ✅ 確保表格與圖表顯示完全相同的數據

2. **代碼簡化**
   - ✅ 移除 `generateCostTimeCurve()` 函數（減少代碼重複）
   - ✅ 減少維護成本（只需維護一套計算邏輯）

3. **完整性**
   - ✅ 包含所有成本項目（直接成本、間接成本、逾期罰金）
   - ✅ 支持多要徑處理邏輯
   - ✅ 正確標示最佳點和正常點

#### 效果驗證
- ✅ 曲線圖顯示的每個點都與趕工計劃表格完全一致
- ✅ 最佳點（綠色）正確標示在最低總成本的工期上
- ✅ 正常點（紅色）正確標示在未趕工的工期上
- ✅ 曲線形狀正確反映成本隨工期變化的趨勢

---

### v1.9 更新內容 (2025-10-27) - TCT 多要徑處理邏輯修正

#### 核心問題修正
**問題描述：** 系統在遇到多條要徑時，只趕工到某個點就停止，無法找到真正的最佳解。

**根本原因：**
1. 當單次趕工無法縮短總工期時（多要徑瓶頸），系統立即停止
2. 沒有嘗試趕工其他要徑作業
3. 導致遺漏成本更低的趕工方案

#### 演算法優化
1. **多要徑智能處理**
   - ✅ 當某作業趕工無法縮短工期時，**不停止**，而是嘗試其他要徑作業
   - ✅ 使用 `attemptedTasks` Set 追蹤本輪已嘗試的作業
   - ✅ 只有當**所有**要徑作業都無法再趕工時才停止

2. **趕工策略**
   ```typescript
   每輪迭代：
   1. 找出要徑上可趕工且未嘗試的作業
   2. 選擇趕工單位成本最低的作業進行趕工
   3. 如果工期成功縮短：
      - 記錄這次趕工
      - 清空已嘗試記錄
      - 進入下一輪
   4. 如果工期沒有縮短：
      - 回退這次趕工
      - 標記該作業為已嘗試
      - 繼續嘗試其他作業
   5. 直到所有要徑作業都嘗試完畢
   ```

3. **完整趕工方案生成**
   - ✅ 生成從正常工期到最短可達工期的**所有**趕工方案
   - ✅ 記錄每個方案的完整成本資訊
   - ✅ 最後從中選擇總成本最低的作為最佳解

#### 實際案例驗證
**測試案例：** 9個作業，正常工期41天

**修正前（錯誤）：**
- 只趕工到39天就停止
- 錯誤選擇39天為最佳解（總成本60,600）

**修正後（正確）：**
- 完整生成8個趕工方案（41→40→39→38→37→36→35→34天）
- 正確選擇38天為最佳解（總成本60,500）
- **符合課本理論答案** ✅

#### 技術細節
```typescript
// 關鍵改進：本輪嘗試記錄
const attemptedTasks = new Set<string>()

// 過濾條件
const criticalTasks = workingTasks.filter(t => 
  t.isCritical && 
  (t.actual_duration || t.normal_duration) > t.crash_duration &&
  !attemptedTasks.has(t.name)  // 排除已嘗試作業
)

// 成功縮短：清空記錄，開始新一輪
if (newDuration < currentDuration) {
  // 記錄趕工
  attemptedTasks.clear()
} else {
  // 失敗：回退並標記
  // 回退邏輯...
  attemptedTasks.add(best.task.name)
}
```

#### 使用者價值
- 📚 **教學準確性**：計算結果完全符合工程管理課本理論
- 🔍 **完整性**：展示所有可能的趕工方案供決策參考
- 📊 **正確性**：能夠處理複雜的多要徑專案
- 💡 **可靠性**：確保找到真正的最佳工期-成本平衡點

---

### v1.8 更新內容 (2025-10-27) - TCT 計算邏輯修正

#### 核心計算邏輯修正
1. **直接成本計算修正**
   - ✅ 修正直接成本計算公式：`直接成本 = 所有作業正常成本總和 + 累計趕工額外成本`
   - ✅ 確保正常情況（循環 0）顯示完整的基礎直接成本
   - ✅ 每次趕工後累加額外趕工成本

2. **逾期罰金計算修正**
   - ✅ 修正罰金計算公式：`逾期罰金 = penalty_per_day × max(0, duration - deadline)`
   - ✅ 只在工期超過契約工期時計算罰金
   - ✅ 當工期小於等於契約工期時，罰金為 0

3. **邊際成本分析優化**
   - ✅ 修正邊際效益計算邏輯：動態考慮當前是否逾期
   - ✅ 當 `duration > deadline`：`savingsPerDay = overhead + penalty`
   - ✅ 當 `duration <= deadline`：`savingsPerDay = overhead`（不再節省罰金）
   - ✅ 確保趕工決策符合成本效益原則

#### UI/UX 改進
1. **契約工期輸入欄位**
   - ✅ 新增「契約工期」輸入欄位（必要參數）
   - ✅ 將「目標工期」改為「契約工期」，語意更清晰
   - ✅ 添加 tooltip 說明：「契約規定的完工期限（天）」

2. **術語更新**
   - ✅ 「預期罰金」改為「逾期罰金」
   - ✅ 「目標工期」改為「契約工期」
   - ✅ 更符合實務用語習慣

#### 計算結果準確性
- ✅ 趕工計畫表格顯示正確的成本分解
- ✅ 正常情況（循環 0）顯示完整基礎成本
- ✅ 每次趕工記錄精確的成本變化
- ✅ 總成本 = 直接成本 + 間接成本 + 逾期罰金

#### 數學模型
```
決策變數：
- S_i：作業開工時間
- d_i：作業實際工期
- y_i：作業趕工天數
- T：專案完工時間

目標函數：
最小化：Σ(normal_cost) + Σ(crash_cost_per_day × y_i) + overhead_cost_per_day × T + penalty_per_day × max(0, T - deadline)

邊際效益：
- 如果 T > deadline：savingsPerDay = overhead_cost_per_day + penalty_per_day
- 如果 T ≤ deadline：savingsPerDay = overhead_cost_per_day
- marginalCost = crash_cost_per_day - savingsPerDay
```

#### 使用者價值
- 📚 教學準確性：計算結果符合課本理論
- 🔍 邏輯透明：清楚展示逾期罰金的動態計算
- 📊 成本分析：準確反映直接成本構成
- 💡 決策支援：正確的邊際效益分析

---

### v1.7 更新內容 (2025-10-27) - TCT CSV 匯入/匯出功能

#### 新增功能
1. **CSV 匯入功能**
   - ✅ 支援從 CSV 檔案批量匯入作業資料
   - ✅ CSV 格式：作業名稱、正常工期、趕工工期、正常成本、趕工成本、前置作業
   - ✅ 完整的資料驗證：
     - 檢查作業名稱唯一性
     - 驗證工期與成本的合理性
     - 檢查前置作業是否存在
   - ✅ 支援前置作業關係（分號分隔）
   - ✅ 自動處理 UTF-8 with BOM 編碼（Excel 相容）

2. **CSV 匯出功能**
   - ✅ 匯出作業資料為 CSV
   - ✅ 匯出計算結果為 CSV（包含趕工計畫、執行計畫、要徑）
   - ✅ 結果包含：
     - 摘要資訊（最佳工期、總成本、成本分解）
     - 趕工計畫表（每次迭代的詳細成本分析）
     - 作業執行計畫（開工時間、實際工期、趕工天數）
     - 要徑鏈

3. **CSV 範本下載**
   - ✅ 提供標準格式範本
   - ✅ 包含範例資料
   - ✅ Excel 可直接開啟編輯

4. **UI/UX 改進**
   - 📥 **匯入 CSV** 按鈕（當無作業時顯示）
   - 📋 **下載範本** 按鈕
   - 📤 **匯出 CSV** 按鈕（作業列表）
   - 📊 **匯出結果** 按鈕（計算結果區域）
   - 🎨 匯入對話框（拖放式檔案選擇）
   - ✅ 友善的成功/錯誤提示訊息

5. **技術實現**
   ```typescript
   // 新增函數
   export function exportTCTTasksToCSV(tasks: any[]): void
   export function exportTCTResultToCSV(result: any): void
   export function importTCTTasksFromCSV(file: File): Promise<any[]>
   export function downloadTCTCSVTemplate(): void
   ```

#### 使用者工作流程
```
方式一：手動輸入
1. 開啟 TCT 工具
2. 逐筆輸入作業資料
3. 設定專案參數
4. 執行計算
5. 匯出結果

方式二：CSV 匯入（推薦）
1. 下載 CSV 範本
2. 在 Excel 中編輯資料
3. 匯入 CSV 檔案
4. 檢查匯入結果
5. 設定專案參數
6. 執行計算
7. 匯出結果
```

#### 檔案格式範例

**匯入 CSV 格式：**
```csv
作業名稱,正常工期(天),趕工工期(天),正常成本(元),趕工成本(元),前置作業
基礎開挖,10,7,100000,130000,---
結構施工,15,12,200000,250000,基礎開挖
外牆裝修,8,6,80000,100000,結構施工
內部裝修,12,9,150000,190000,結構施工
水電工程,10,8,120000,150000,外牆裝修;內部裝修
```

**匯出結果 CSV 格式：**
- 摘要資訊
- 趕工計畫（包含每次迭代的詳細成本）
- 作業執行計畫
- 要徑

#### 品質保證
- ✅ TypeScript 類型安全
- ✅ 完整的輸入驗證
- ✅ 錯誤處理機制
- ✅ Excel 相容性（UTF-8 with BOM）
- ✅ 無 Linter 錯誤
- ✅ 構建成功

---

### v1.6 更新內容 (2025-10-27) - TCT 趕工計畫表格

#### 新增功能
1. **趕工計畫詳細記錄表格**
   - ✅ 顯示每個趕工循環的完整資訊
   - ✅ 記錄項目：
     - 趕工循環次數（第 0 次為正常情況）
     - 總工期（天）
     - 壓縮作業項目（被趕工的作業名稱）
     - 直接成本（累計趕工成本）
     - 間接成本（overhead_cost_per_day × 工期）
     - 預期罰金（penalty_per_day × 工期）
     - 總成本（直接成本 + 間接成本 + 預期罰金）

2. **視覺化標示**
   - 🔵 正常情況（第 0 次）：淺藍色底色
   - 🟡 最佳解：黃色底色加粗顯示
   - 📊 成本變化追蹤：一目瞭然的趕工決策過程

3. **資料結構更新**
   ```typescript
   interface CrashIteration {
     iteration: number          // 趕工循環次數
     duration: number           // 總工期
     crashedTask: string        // 壓縮作業項目
     directCost: number         // 直接成本
     overheadCost: number       // 間接成本
     penaltyCost: number        // 預期罰金
     totalCost: number          // 總成本
   }
   
   interface TCTResult {
     ...
     crashIterations: CrashIteration[]  // 趕工循環記錄
   }
   ```

4. **演算法記錄機制**
   - 在迭代開始前記錄正常情況（循環 0）
   - 每次趕工成功後記錄新狀態
   - 自動標註最佳解位置

#### 使用者價值
- 📚 教學輔助：清楚展示每次趕工決策的成本效益
- 🔍 決策透明：完整追蹤從正常情況到最佳解的過程
- 📊 成本分析：區分直接成本、間接成本、預期罰金
- 💡 最佳化理解：視覺化呈現邊際成本分析結果

---

### v1.5 更新內容 (2025-10-27) - TCT V3 輸入介面優化

#### 核心改動
1. **簡化輸入欄位設計**
   - ❌ 移除「作業 ID」欄位，改用作業名稱作為唯一識別
   - ✅ 將「趕工單位成本（元/天）」改為「總成本」輸入方式：
     - 正常工期（天）
     - 趕工工期（天）
     - 正常成本（元）
     - 趕工成本（元）
   - 系統自動計算：`趕工單位成本 = (趕工成本 - 正常成本) / (正常工期 - 趕工工期)`

2. **新增預期罰金參數**
   - 新增「預期罰金（每日）」輸入欄位
   - 邊際成本計算更新為：
     ```
     marginal_cost = crash_cost_per_day - (overhead_cost_per_day + penalty_per_day)
     ```
   - 更符合實務情境（考慮工期延遲罰款）

3. **輸入介面優化**
   | 舊版本（V2） | 新版本（V3） |
   |------------|-------------|
   | 作業 ID | ❌ 移除 |
   | 作業名稱 | ✅ 保留 |
   | 正常工期 | ✅ 保留 |
   | 最短工期 | → 趕工工期 |
   | 趕工單位成本（元/天） | → 正常成本（元） + 趕工成本（元） |
   | 間接成本（每日） | ✅ 保留 |
   | — | ➕ **預期罰金（每日）** |

4. **資料驗證邏輯更新**
   - 檢查作業名稱唯一性（取代 ID 檢查）
   - 新增成本合理性驗證：`趕工成本 ≥ 正常成本`
   - 新增工期合理性驗證：`趕工工期 < 正常工期`

5. **演算法優化**
   - 自動計算趕工斜率（Crash Cost Slope）
   - 同時考慮間接成本與罰金的邊際效益分析
   - 優化目標：`最小化 (趕工成本 + 間接成本 + 罰金)`

#### 使用者體驗提升
- 🎯 更直覺的成本輸入方式（總成本 vs 單位成本）
- 📝 減少必填欄位（移除 ID）
- 💡 更貼近實務情境（加入罰金考量）
- ✅ 更嚴格的資料驗證機制

---

### v1.4 更新內容 (2025-10-27) - TCT V2 重大重構

#### 新增功能
1. **TCT 工具完全重構（基於 TCT.md 規格）**
   - ✅ 採用線性規劃（LP）連續趕工模型
   - ✅ 加入間接成本（Overhead Cost）考量
   - ✅ 支援前置關係（Predecessors）約束
   - ✅ 計算開工時間（Start Time）
   - ✅ 顯示實際工期與趕工天數
   - ✅ 要徑（Critical Path）識別與視覺化

2. **數學模型更新**
   - **決策變數**：
     - S_i：作業開工時間
     - d_i：作業實際工期
     - y_i：作業趕工天數
     - T：專案完工時間
   - **目標函數**：
     ```
     最小化：Σ(crash_cost_per_day × y_i) + overhead_cost_per_day × T
     ```
   - **限制式**：
     - d_i = duration_normal - y_i
     - 0 ≤ y_i ≤ duration_normal - duration_min
     - S_j ≥ S_i + d_i  ∀(i → j) 前置關係
     - T ≥ S_i + d_i  ∀i

3. **輸入欄位重新設計**
   - 作業 ID（唯一識別）
   - 作業名稱
   - 正常工期（duration_normal）
   - 最短工期（duration_min）
   - 趕工單位成本（crash_cost_per_day，元/天）
   - 前置作業列表（predecessors）
   - 專案間接成本（overhead_cost_per_day，元/天）

4. **輸出結果全面升級**
   - 最佳專案工期 T*
   - 最低總成本 C*
   - 成本分解：
     - 趕工成本（Crash Cost）
     - 間接成本（Overhead Cost）
   - 作業執行計畫表：
     - 開工時間（Start Time）
     - 實際工期（Actual Duration）
     - 趕工天數（Crash Days）
     - 趕工成本（Crash Cost）
     - 要徑標示（Critical Badge）
   - 要徑鏈展示（Critical Path Chain）
   - 成本-時間權衡曲線（標註最佳點與正常點）

5. **UI/UX 改進**
   - 新增前置作業選擇器（Chip 按鈕選擇）
   - 三張摘要卡片：
     - 最佳工期卡片（綠色漸層）
     - 最低成本卡片（橙色漸層）
     - 成本分解卡片（紫藍漸層）
   - 執行計畫表格（要徑作業高亮顯示）
   - 要徑鏈視覺化（紅色節點 + 箭頭）
   - 成本-時間曲線圖（D3.js）：
     - 綠色圓點標註最佳點
     - 紅色圓點標註正常點
     - 圖例說明

6. **演算法改進**
   - 邊際成本分析（Marginal Cost Analysis）
   - 當 crash_cost_per_day < overhead_cost_per_day 時才趕工
   - 避免無效趕工（工期未縮短則回退）
   - 循環依賴檢測（Topological Sort）
   - DAG（有向無環圖）驗證

#### 技術架構更新
1. **資料結構改變**
   ```typescript
   interface TCTTask {
     id: string                    // 唯一識別碼
     name: string                  // 作業名稱
     duration_normal: number       // 正常工期
     duration_min: number          // 最短工期
     crash_cost_per_day: number    // 趕工單位成本
     predecessors: string[]        // 前置作業列表
     start_time?: number           // 開工時間
     actual_duration?: number      // 實際工期
     crash_days?: number           // 趕工天數
     isCritical?: boolean          // 是否為要徑
   }
   ```

2. **新增檔案/模組**
   - 完全重寫 `src/utils/tctEngine.ts`
   - 完全重寫 `src/components/TCTOptimizer.vue`

3. **更新檔案**
   - `src/locales/zh-TW.ts`：新增 30+ 翻譯鍵值
   - `src/locales/en-US.ts`：新增 30+ 翻譯鍵值
   - `src/locales/types.ts`：更新 TCT 類型定義

#### 演算法說明
**邊際效益分析（Marginal Benefit Analysis）**
- 計算每個要徑作業的邊際成本：
  ```
  marginal_cost = crash_cost_per_day - overhead_cost_per_day
  ```
- 當 marginal_cost < 0 時，趕工可降低總成本
- 選擇邊際成本最小的作業進行趕工
- 迭代直到邊際成本 ≥ 0 或無法繼續趕工

#### 與舊版本的差異
| 項目 | V1 | V2 |
|------|----|----|
| 資料輸入 | 正常/趕工成本（總額） | 趕工單位成本（元/天） |
| 間接成本 | ❌ 未考慮 | ✅ 每日間接成本 |
| 前置關係 | ✅ 支援但未充分利用 | ✅ 完整支援並用於CPM |
| 開工時間 | ❌ 未計算 | ✅ 計算並顯示 |
| 優化目標 | 最小化趕工成本 | 最小化總成本（趕工+間接） |
| 演算法 | 簡單貪婪法 | 邊際效益分析 + CPM |
| 視覺化 | 基本圖表 | 完整執行計畫 + 要徑鏈 |

#### 驗收標準
- [ ] 能正確處理前置關係約束
- [ ] 檢測循環依賴並給出錯誤提示
- [ ] 計算結果符合線性規劃邏輯
- [ ] 開工時間計算正確（基於 ES）
- [ ] 要徑識別準確
- [ ] 成本-時間曲線正確繪製
- [ ] 所有翻譯完整（繁中/英文）

---

### v1.3 更新內容 (2025-10-27)

#### 新增功能
1. **工期-成本權衡最佳化工具 (TCT)**
   - ✅ 新增 TCT 工具頁面與路由設定
   - ✅ 實現 Time-Cost Trade-off 最佳化演算法
   - ✅ 支援趕工分析（Crashing Analysis）
   - ✅ 成本斜率計算（Cost Slope Analysis）
   - ✅ 最小化成本最佳化（給定目標工期）
   - ✅ 成本-時間權衡曲線視覺化（D3.js）
   - ✅ Pareto 前緣分析
   - ✅ 趕工方案詳細展示
   - ✅ 互動式資料輸入與驗證
   - ✅ 支援繁體中文與英文雙語

2. **TCT 核心功能**
   - **作業輸入**：
     - 作業名稱、正常工期、趕工工期
     - 正常成本、趕工成本
     - 自動計算趕工單位成本（元/天）
   - **最佳化計算**：
     - 給定目標工期，計算最小成本方案
     - 識別要徑並優先趕工成本效益最高的作業
     - 迭代趕工直到達到目標工期
   - **結果展示**：
     - 專案總工期與總成本
     - 成本增加與工期縮短統計
     - 趕工方案明細表（含趕工天數、單位成本、額外成本）
     - 成本-時間權衡曲線圖

3. **工具頁面更新**
   - ✅ 在工具列表新增 TCT 工具卡片
   - ✅ 紅橙色漸層主題配色（#f54ea2 → #ff7676）
   - ✅ TCT 圖示與說明文字
   - ✅ 一鍵導航至 TCT 工具

#### 技術架構
1. **新增檔案**
   - `src/utils/tctEngine.ts`：TCT 計算引擎
   - `src/views/TCTView.vue`：TCT 視圖組件
   - `src/components/TCTOptimizer.vue`：TCT 核心功能組件

2. **更新檔案**
   - `src/locales/zh-TW.ts`：新增 TCT 繁體中文翻譯
   - `src/locales/en-US.ts`：新增 TCT 英文翻譯
   - `src/locales/types.ts`：新增 TCT 翻譯類型定義
   - `src/router/index.ts`：新增 `/tools/tct` 路由
   - `src/views/ToolsView.vue`：新增 TCT 工具卡片

3. **演算法實現**
   - **Crashing Algorithm**：迭代式趕工演算法
   - **CPM Integration**：整合要徑法進行要徑識別
   - **Cost Slope Analysis**：趕工單位成本計算與排序
   - **Validation System**：完整的資料驗證機制

4. **數學模型**
   - **目標函數**：最小化總成本 Z = Σ(作業成本)
   - **限制式**：
     - 工期限制：crash_duration ≤ duration ≤ normal_duration
     - 成本關係：cost = normal_cost + cost_slope × (normal_duration - duration)
     - 依賴關係：維持 CPM 邏輯約束
     - 目標工期：project_duration ≤ target_duration

#### UI/UX 設計
1. **響應式表格佈局**
   - 適應不同螢幕尺寸
   - 橫向滾動支援
   - 緊湊清晰的資料呈現

2. **視覺化圖表**
   - SVG 繪製成本-時間曲線
   - 互動式提示（Tooltip）
   - 自適應比例尺

3. **操作流程**
   - 步驟 1：輸入作業資料
   - 步驟 2：設定目標工期
   - 步驟 3：執行最佳化計算
   - 步驟 4：查看趕工方案與圖表

---

### v1.2 更新內容 (2025-10-25)

#### 新增功能
1. **進階依賴關係系統**
   - ✅ 支援四種依賴關係類型（FS, SS, FF, SF）
   - ✅ 支援 Lag 時間設定（正負值）
   - ✅ 依賴關係編輯功能
   - ✅ 合併重複作業功能（含完整依賴關係整合）

2. **部署與 CI/CD**
   - ✅ GitHub Pages 部署設定
   - ✅ GitHub Actions 自動化工作流程
   - ✅ TypeScript 嚴格模式錯誤修復

#### UI/UX 改進
1. **輸入介面優化**
   - ✅ 增加 Lag 輸入欄位寬度（50px → 65px）
   - ✅ 工期欄位顯示優化（移除 "天" 後綴）
   - ✅ 依賴關係多行顯示（垂直堆疊）
   - ✅ 表格行距緊湊化（padding: 12px → 8px）
   - ✅ 作業名稱單行顯示（超出省略）

2. **結果表格優化**
   - ✅ CPM 標題細體化（font-weight: 300）
   - ✅ 統一標題字體樣式（letter-spacing: 0.5px）
   - ✅ 欄位寬度優化（作業名稱加寬、工期縮小）
   - ✅ 工期數字靠右對齊
   - ✅ 移除垂直格線
   - ✅ 起始/結束標籤同行顯示
   - ✅ 響應式字體大小調整

3. **視覺一致性**
   - ✅ 統一 "作業輸入" 與 "計算結果" 表格樣式
   - ✅ 一致的字體、行距、邊框設計
   - ✅ 簡潔清爽的表格外觀

#### 錯誤修復
1. **依賴關係處理**
   - ✅ 修復合併重複作業時依賴關係遺失的問題
   - ✅ 實現五階段合併演算法
   - ✅ 完整的依賴關係映射與去重

2. **TypeScript 類型安全**
   - ✅ 修復所有 strict mode 類型錯誤
   - ✅ 添加完整的類型守衛
   - ✅ undefined 值處理優化

3. **建置與部署**
   - ✅ 修復 d3 依賴缺失問題
   - ✅ 修復 vite.config.ts base path 設定
   - ✅ PowerShell 指令相容性修復

#### 技術改進
1. **程式碼品質**
   - ✅ 重構合併演算法（五階段處理）
   - ✅ 改進錯誤處理機制
   - ✅ 優化資料驗證邏輯

2. **文件更新**
   - ✅ 所有文件轉換為繁體中文
   - ✅ 更新 PRD 以反映新功能
   - ✅ 完善程式碼註解

---

**文件版本**: v1.10  
**建立日期**: 2025-10-24  
**最後更新**: 2025-10-27  
**作者**: 張凱博
